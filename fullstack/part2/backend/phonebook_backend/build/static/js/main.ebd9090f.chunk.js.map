{"version":3,"sources":["componets/Filter.js","componets/PersonForm.js","componets/Persons.js","services/persons.js","componets/Notification.js","App.js","index.js"],"names":["Filter","filter","handleChange","value","onChange","PersonForm","props","o","addPerson","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","type","Persons","persons","handleClick","map","person","name","number","onClick","id","baseUrl","getAll","axios","get","then","response","data","newPerson","post","put","delete","Notification","message","className","App","useState","setPersons","setNewName","setNewNumber","setFilter","warnMessage","setWarnMessage","warnClassName","setWarnClassName","useEffect","personsServices","initialPersons","warnMessageFn","timer","setTimeout","personsToShow","toLowerCase","includes","toLocaleLowerCase","fn","event","target","formProps","preventDefault","alert","find","window","confirm","changedPerson","returnedPerson","catch","p","updatePerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ebd9090f.chunk.js","sourcesContent":["const Filter = ({ filter, handleChange }) => ( \n  <div>\n    filter shown with <input value={filter} onChange={handleChange}/>\n  </div>\n)\n\nexport default Filter;","const PersonForm = (props) => {\n  const { addPerson, newName, newNumber, handleNameChange, handleNumberChange } = props.o;\n\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n}\n\nexport default PersonForm;\n\n","const Persons = ({ persons, handleClick }) => (\n  <div>\n    {persons.map(person => (\n      <p key={person.id}>\n        {person.name} {person.number}\n        <button onClick={() => handleClick(person.name, person.id)}>delete</button>\n      </p>)\n    )}\n  </div>\n);\n\nexport default Persons;","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n}\n\nconst create = newPerson => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then(response => response.data);\n}\n\nconst update = (id, newPerson) => {\n  const request = axios.put(`${baseUrl}/${id}`, newPerson);\n  return request.then(response => response.data);\n}\n\nconst remove = id => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then(() => getAll());\n}\n\nexport default { getAll, create, update, remove };","const Notification = ({ message, className }) => {\n  if (message === null) {\n    return null;\n  }\n\n  const name = `warning ${className}`;\n\n  return (\n    <div className={name}>\n      {message}\n    </div>\n  )\n}\n\nexport default Notification;","import React, { useEffect, useState } from 'react';\nimport Filter from './componets/Filter';\nimport PersonForm from './componets/PersonForm';\nimport Persons from './componets/Persons';\nimport personsServices from './services/persons'\nimport Notification from \"./componets/Notification\";\nimport './index.css';\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ filter, setFilter ] = useState('');\n  const [ warnMessage, setWarnMessage ] = useState(null);\n  const [ warnClassName, setWarnClassName ] = useState('');\n\n  useEffect(() => {\n    personsServices\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons);\n      })\n  }, []);\n\n  const warnMessageFn = (message, name, timer = 5000) => {\n    setWarnMessage(message)\n    setWarnClassName(name);\n\n    setTimeout(() => {\n      setWarnMessage(null);\n    }, timer);\n  }\n\n  const updatePerson = (person) => {\n    const message = `${person.name} is already added to phonebook, replac the old number with a new one?`;\n    if (person && window.confirm(message)) {\n      const id = person.id;\n      const changedPerson = { ...person, number: newNumber };\n\n      personsServices\n        .update(id, changedPerson)\n        .then(returnedPerson => {\n          setPersons(persons.map(person => person.id !== id ? person : returnedPerson));\n          setNewName('');\n          setNewNumber('');\n        })\n        .catch(() => {\n          const message = `Infomation of ${person.name} has already been removed from server`;\n          warnMessageFn(message, 'fail');\n          setPersons(persons.filter(p => p.id !== id));\n        })\n    }\n  }\n\n  // Check inputs fields\n  const isEmpty = () => {\n    if (newName === '' || newNumber === '') {\n      alert(\"These inputs can't be empty.\");\n      return;\n    };\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    isEmpty();\n    // If person doesn't exist, then POST it into server.\n    const person = persons.find(person => person.name === newName);\n    if (!person) {\n      const newPerson = {\n        name: newName,\n        number: newNumber\n      }\n\n      personsServices\n        .create(newPerson)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson));\n          setNewName('');\n          setNewNumber('');\n          warnMessageFn(`Added ${returnedPerson.name}`, 'pass');\n        })\n    } else {\n      // Using PUT method\n      updatePerson(person);\n    }\n  }\n\n  // Filter persons with name message\n  const personsToShow = persons.filter(person => \n    person.name\n      .toLowerCase()\n      .includes(filter.toLocaleLowerCase())\n  ); \n\n  const handleChange = (fn) => (event) => {\n    fn(event.target.value);\n  }\n\n  const handleDeleteClick = (name, id) => {\n    if (window.confirm(`Delete ${name}?`)) {\n      personsServices\n        .remove(id)\n        .then(returnedPerson => {\n          setPersons(returnedPerson);\n          warnMessageFn('Deleted successfully', 'pass');\n        })\n        .catch(() => {\n          const message = `Information of ${name} has already been removed from server`;\n          warnMessageFn(message, 'fail');\n          setPersons(persons.filter(p => p.id !== id));\n        })\n    }\n  }\n\n  const formProps = {\n    handleNameChange: handleChange(setNewName),\n    handleNumberChange: handleChange(setNewNumber),\n    addPerson,\n    setFilter,\n    newName,\n    newNumber\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={warnMessage} className={warnClassName} />\n      <Filter \n        filter={filter} \n        handleChange={handleChange(setFilter)}\n      />\n      <h2>Add a new person</h2>\n      <PersonForm o={formProps} />\n      <h2>Numbers</h2>\n      <Persons \n        persons={personsToShow}\n        handleClick={handleDeleteClick}\n      />\n    </div>\n  );\n}\n\nexport default App;","import React, { useState }from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}